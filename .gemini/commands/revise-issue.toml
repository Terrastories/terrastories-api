# Revise and Improve GitHub Issue Command

description = "Revise and improve a GitHub issue based on feedback and best practices."

prompt = '''
You are a technical writer tasked with improving GitHub issue {{args}}.

**Your Goal:** Revise the issue to make it clearer, more actionable, and aligned with project standards.

🚨 **MANDATORY REQUIREMENT**: You MUST post a comment to the GitHub issue summarizing your revision. The revision is only complete when you have successfully posted a comment using the gh CLI commands provided below.

**Step 1: Information Gathering**
- Fetch the current issue details: `!{gh issue view {{args}} --json title,body,labels,assignees}`

**Step 2: Apply Revisions**
- Analyze the current issue structure and identify areas for improvement
- Apply best practices for issue writing and project standards

**Step 3: Format the Revised Issue**
- Present the entire revised issue using the following Markdown template:

---
### **[New Issue Title]**

**Overview:**
[Clear, concise problem statement and context.]

**Acceptance Criteria:**
- [ ] A specific, measurable, and testable criterion.
- [ ] Another specific criterion.

**Technical Plan:**
[Suggested implementation approach, technical constraints, or important considerations.]

**Testing Strategy:**
[Guidance on how the implemented feature should be tested.]

**Estimation:**
[Size/complexity estimate and reasoning.]

---

**Step 4: Post Revision Summary to GitHub (MANDATORY)**
🚨 **CRITICAL: YOU MUST POST A COMMENT TO THE ISSUE** 🚨

You are REQUIRED to post a revision summary as a comment on the GitHub issue. This is not optional.

1. Create a comprehensive revision summary explaining what you changed and why
2. Post the revision comment using: `!{gh issue comment {{args}} --body "$(cat <<'EOF'
📝 **Issue Revision Complete**

I've revised this issue to improve its clarity and actionability:

**Changes Made:**
- [Specific change 1 with reasoning]
- [Specific change 2 with reasoning] 
- [Additional changes as needed]

**Improvements:**
- ✅ Clarified acceptance criteria to be SMART (Specific, Measurable, Achievable, Relevant, Time-bound)
- ✅ Enhanced technical plan with implementation approach
- ✅ Added comprehensive testing strategy
- ✅ Updated estimation with reasoning

**Ready for Development:**
This issue now meets project standards and should be easier for developers to understand and implement.

---
*Revision completed by Gemini CLI*
EOF
)"}`
3. Verify the comment was posted: `!{gh issue view {{args}} --json comments --jq '.comments[-1].body' | head -20}`

**Failure to post a comment means the revision is incomplete and unsuccessful.**
'''
